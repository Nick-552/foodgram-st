# Foodgram - Нельзяграм для рецептов

## Сообщение для ревьюера из Яндекса
Доброго времени суток!
В последнем ревью Вы написали, что в проекте был обнаружен плагиат. Хочу отметить, что я не использовал код т.н. "другого студента". Полагаю, что все совпадения кода связаны с тем, что задание и требования у всех одинаковые а проект прислало уже много студентов.
Я изменил структуру проекта, немного порефакторил код, также добавил доп ручку для генерации рецепта с помощью ИИ по ингридиентам и добавил для нее Postman коллекцию с тестами. (Правда для корректной работы ручки потребуется апи ключ для openai)
Прошу Вас пересмотреть решение и проверить проект.
Надеюсь на Ваше понимание.
С ув. Николай Дроздов (Nick552)

## О проекте

"Foodgram" - это веб-приложение, которое позволяет пользователям публиковать рецепты, подписываться на публикации других пользователей, добавлять понравившиеся рецепты в список «Избранное», а также создавать список покупок для приготовления выбранных блюд.

### Технологии

#### Backend
- Python 3
- Django 4
- Django REST Framework
- PostgreSQL
- Gunicorn

#### Frontend
- React
- JavaScript
- Node.js
- npm

#### Инфраструктура
- Docker
- Docker Compose
- GitHub Actions (CI/CD)

## Функциональность

- Регистрация и авторизация пользователей
- Создание, просмотр, редактирование и удаление рецептов
- Фильтрация рецептов
- Добавление рецептов в избранное
- Подписка на авторов рецептов
- Формирование списка покупок
- Возможность скачать список покупок
- Сокращенные ссылки на рецепты
- Загрузка изображений для рецептов и аватаров пользователей

## CI/CD Pipeline

Проект настроен на автоматический CI/CD с использованием GitHub Actions:

1. **Тестирование**: Автоматическая проверка кода с помощью flake8
2. **Сборка Docker образов**: Сборка образов для backend и frontend
3. **Публикация в Docker Hub**: Публикация образов в Docker Hub Registry
4. **Автоматический деплой**: Деплой на сервер при пуше в ветку main/master

Для настройки CI/CD необходимо добавить [секреты в GitHub](/.github/SECRETS.md).

## Переменные окружения

Для корректной работы приложения необходимо настроить следующие переменные окружения в файле `.env` в директории `infra/`:

### Основные настройки Django
```
SECRET_KEY=your-secret-key
DEBUG=False
ALLOWED_HOSTS=localhost,127.0.0.1,your-domain.com
```

### Настройки базы данных
```
POSTGRES_DB=foodgram
POSTGRES_USER=foodgram_user
POSTGRES_PASSWORD=your-secure-password
DB_HOST=db
DB_PORT=5432
```

### Настройки для генерации рецептов с помощью ИИ
```
AI_API_KEY=your-openai-api-key
```

Примечание: Если переменные окружения не заданы, будут использованы значения по умолчанию, указанные в коде. Для продакшн-среды настоятельно рекомендуется задать все переменные окружения с безопасными значениями.

## Запуск проекта локально

### Предварительные требования

- Docker и Docker Compose

### Шаги для запуска

1. Клонировать репозиторий:
   ```
   git clone https://github.com/Nick-552/foodgram-st.git
   cd foodgram-st
   ```

2. Создать файл `.env` в директории `infra/` с необходимыми переменными окружения (см. раздел "Переменные окружения").

3. Запустить проект с помощью Docker Compose:
   ```
   cd infra
   docker-compose up -d --build
   ```

4. После успешного запуска будут доступны следующие ресурсы:
   - Веб-приложение: http://localhost
   - API: http://localhost/api/
   - Документация API: http://localhost/api/docs/
   - Админ-панель: http://localhost/admin/

### Тестирование с Postman

В репозитории есть готовая Postman-коллекция для тестирования API:

1. Импортируйте файл `postman_collection/foodgram.postman_collection.json` в Postman
2. Запустите коллекцию для тестирования API
3. Для очистки базы данных после тестирования можно использовать скрипт `postman_collection/clear_db.sh`

Подробная информация о работе с Postman-коллекцией доступна в [README.md](postman_collection/README.md) внутри директории postman_collection.

## Структура проекта

- `backend/` - Django приложение (API)
- `frontend/` - React приложение
- `infra/` - Файлы для развертывания (Docker, Nginx)
- `data/` - Данные для загрузки (ингредиенты)
- `postman_collection/` - Файлы для тестирования API
- `.github/workflows/` - Файлы настройки GitHub Actions

## Автор

**Николай Дроздов** - [@Nick-552](https://github.com/Nick-552)

- Реализовал Django бэкенд
- Настроил инфраструктуру и деплой
- Интегрировал с React фронтендом

Основная структура проекта и клиентская часть были предоставлены курсом Яндекса `бэкенд-разработчик`.
Бэкенд на django был реализован в соответствии с заданием и согласно openapi спецификации с этого же курса.

